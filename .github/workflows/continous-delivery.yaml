name: ðŸš€ Continuous Delivery

on:
  workflow_dispatch:
  push:
    branches:
      - main
      - next
      - rc

permissions: write-all
env:
  GIT_AUTHOR_NAME: filezinho-bot
  GIT_AUTHOR_EMAIL: interaction.platform@stone.com.br
  GIT_COMMITTER_NAME: filezinho-bot
  GIT_COMMITTER_EMAIL: interaction.platform@stone.com.br
  NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

defaults:
  run:
    shell: bash

concurrency:
  group: cd-${{ github.ref }}
  cancel-in-progress: true

jobs:
  release:
    name: Release
    uses: stone-payments/github-actions-workflows/.github/workflows/front-end-static-cd.yml@front-end-v3
    with:
      node-version: ".nvmrc"
      
      git-name: filezinho-bot
      git-email: interaction.platform@stone.com.br
      
      
      # Addictional options
      # pnpm-version: '8.5.1'
      # run-unit-test-parallel: true
      # run-unit-test-parallel-shard: 16
    secrets:
      NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
